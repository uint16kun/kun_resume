<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <title>Moving Target Control and Automatic Tracking System | Hankun Xu</title><meta name="description" content="Hankun Xu's resume">
    <link rel="preload" href="/assets/style-10ckNbAn.css" as="style"><link rel="stylesheet" href="/assets/style-10ckNbAn.css">
    <link rel="modulepreload" href="/assets/app-O5f_D5B5.js"><link rel="modulepreload" href="/assets/Moving target control and automatic tracking system.html-DYiGxFtS.js">
    <link rel="prefetch" href="/assets/index.html-f7ZZfJPZ.js" as="script"><link rel="prefetch" href="/assets/index.html-BuxdtHY6.js" as="script"><link rel="prefetch" href="/assets/index.html-CFh3G9PT.js" as="script"><link rel="prefetch" href="/assets/index.html-psVaBq1x.js" as="script"><link rel="prefetch" href="/assets/Brushless motor drive circuit and FOC control algorithm design.html-DlclMQZE.js" as="script"><link rel="prefetch" href="/assets/Car following driving system.html-D_zhVnoS.js" as="script"><link rel="prefetch" href="/assets/High-throughput phenotype monitoring system for potted plants.html-CdJCnSwF.js" as="script"><link rel="prefetch" href="/assets/Non-contact object size and shape measurement.html-BwxZJjeZ.js" as="script"><link rel="prefetch" href="/assets/index.html-BMn5zQcD.js" as="script"><link rel="prefetch" href="/assets/Rolling ball control system.html-BXCGG7xJ.js" as="script"><link rel="prefetch" href="/assets/Smart medicine delivery car.html-Bp0FFjuK.js" as="script"><link rel="prefetch" href="/assets/index.html-C_vjeTeH.js" as="script"><link rel="prefetch" href="/assets/index.html-9cYvJ1Ix.js" as="script"><link rel="prefetch" href="/assets/index.html-COsb-CL_.js" as="script"><link rel="prefetch" href="/assets/Brushless motor drive circuit and FOC control algorithm design.html-BWz0IYNR.js" as="script"><link rel="prefetch" href="/assets/Car following driving system.html-Bg1bWqm8.js" as="script"><link rel="prefetch" href="/assets/High-throughput phenotype monitoring system for potted plants.html-BFJQpgBo.js" as="script"><link rel="prefetch" href="/assets/Moving target control and automatic tracking system.html-D3O7dgCl.js" as="script"><link rel="prefetch" href="/assets/Non-contact object size and shape measurement.html-BXWUP5cZ.js" as="script"><link rel="prefetch" href="/assets/index.html-UX73n4MT.js" as="script"><link rel="prefetch" href="/assets/Rolling ball control system.html-BoWgLOpa.js" as="script"><link rel="prefetch" href="/assets/Smart medicine delivery car.html-DOiJaVWa.js" as="script"><link rel="prefetch" href="/assets/index.html-tuowCeH9.js" as="script"><link rel="prefetch" href="/assets/index.html-CZIa59Nm.js" as="script"><link rel="prefetch" href="/assets/Brushless motor drive circuit and FOC control algorithm design.html-3ihBGNpD.js" as="script"><link rel="prefetch" href="/assets/Car following driving system.html-DeXRbr8G.js" as="script"><link rel="prefetch" href="/assets/High-throughput phenotype monitoring system for potted plants.html-C-HElWgW.js" as="script"><link rel="prefetch" href="/assets/Moving target control and automatic tracking system.html-CCQnjFRK.js" as="script"><link rel="prefetch" href="/assets/Non-contact object size and shape measurement.html-xAVOu_S0.js" as="script"><link rel="prefetch" href="/assets/index.html-D8oXJbII.js" as="script"><link rel="prefetch" href="/assets/Rolling ball control system.html-DKA8d-TN.js" as="script"><link rel="prefetch" href="/assets/Smart medicine delivery car.html-DsPcmLG2.js" as="script"><link rel="prefetch" href="/assets/index.html-D4gv_hGE.js" as="script"><link rel="prefetch" href="/assets/404.html-D67EyLKs.js" as="script"><link rel="prefetch" href="/assets/SearchResult-Be8CCkZ7.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="/logo.jpg" alt="Hankun Xu"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Hankun Xu</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/my-projects/" aria-label="My Projects"><!---->My Projects<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/curriculum-vitae/" aria-label="Curriculum Vitae"><!---->Curriculum Vitae<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/transcript/" aria-label="transcript"><!---->transcript<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/my-projects/Moving%20target%20control%20and%20automatic%20tracking%20system.html" aria-label="English"><!---->English<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/zh/my-projects/Moving%20target%20control%20and%20automatic%20tracking%20system.html" aria-label="简体中文"><!---->简体中文<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/jp/my-projects/Moving%20target%20control%20and%20automatic%20tracking%20system.html" aria-label="日本語"><!---->日本語<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/uint16kun/" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><button type="button" class="search-pro-button" aria-label="Search"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">Search</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/my-projects/" aria-label="My Projects"><!---->My Projects<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/curriculum-vitae/" aria-label="Curriculum Vitae"><!---->Curriculum Vitae<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/transcript/" aria-label="transcript"><!---->transcript<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/my-projects/Moving%20target%20control%20and%20automatic%20tracking%20system.html" aria-label="English"><!---->English<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/zh/my-projects/Moving%20target%20control%20and%20automatic%20tracking%20system.html" aria-label="简体中文"><!---->简体中文<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/jp/my-projects/Moving%20target%20control%20and%20automatic%20tracking%20system.html" aria-label="日本語"><!---->日本語<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/uint16kun/" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading active" href="/my-projects/" aria-label="My Projects"><!---->My Projects<!----></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/my-projects/Moving%20target%20control%20and%20automatic%20tracking%20system.html" aria-label="Moving Target Control and Automatic Tracking System"><!---->Moving Target Control and Automatic Tracking System<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/my-projects/High-throughput%20phenotype%20monitoring%20system%20for%20potted%20plants.html" aria-label="High-Throughput Phenotyping Monitoring System for Potted Plants"><!---->High-Throughput Phenotyping Monitoring System for Potted Plants<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/my-projects/Car%20following%20driving%20system.html" aria-label="Car Following Driving System"><!---->Car Following Driving System<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/my-projects/Non-contact%20object%20size%20and%20shape%20measurement.html" aria-label="Non-Contact Object Size and Shape Measurement"><!---->Non-Contact Object Size and Shape Measurement<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/my-projects/Brushless%20motor%20drive%20circuit%20and%20FOC%20control%20algorithm%20design.html" aria-label="Brushless Motor Drive Circuit and FOC Control Algorithm Design"><!---->Brushless Motor Drive Circuit and FOC Control Algorithm Design<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="project-tasks-and-requirements" tabindex="-1"><a class="header-anchor" href="#project-tasks-and-requirements"><span><strong>Project Tasks and Requirements</strong></span></a></h2><h3 id="tasks" tabindex="-1"><a class="header-anchor" href="#tasks"><span><strong>Tasks</strong></span></a></h3><p> Design and build a moving target control and automatic tracking system. The system includes a red spot position control system to simulate the moving target and a green spot position control system to indicate automatic tracking. The system structure and placement are shown in Figure 1(a). Two laser pens are fixed on their respective independent two-dimensional electric control pan-tilt platforms.</p><div align="center"><img src="/en/%E8%BF%90%E5%8A%A8%E7%9B%AE%E6%A0%87%E6%8E%A7%E5%88%B6%E4%B8%8E%E8%87%AA%E5%8A%A8%E8%BF%BD%E8%B8%AA%E7%B3%BB%E7%BB%9F/%E5%9B%BE1%E8%BF%90%E5%8A%A8%E7%9B%AE%E6%A0%87%E6%8E%A7%E5%88%B6%E4%B8%8E%E8%87%AA%E5%8A%A8%E8%BF%BD%E8%B8%AA%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84%E7%A4%BA%E6%84%8F%E5%8F%8A%E6%91%86%E6%94%BE%E4%BD%8D%E7%BD%AE%E5%9B%BE.png" align="middle"><br> Figure 1 Moving Target Control and Automatic Tracking System Structure and Placement Diagram </div><p> The red laser pen&#39;s spot simulates the moving target, which falls on a white screen 1 meter in front, with a spot diameter ≤ 1 cm. The red spot position control system allows the spot to move anywhere within the screen range.</p><p> The green laser pen&#39;s spot is controlled by the green spot position system to automatically track the red spot on the screen, indicating the effect of automatic tracking, with a spot diameter ≤ 1 cm. The green laser pen placement line is shown in Figure 1(b), which is parallel to the screen and located on both sides of the red laser pen, with a distance greater than 0.4m and less than 1m from the red laser pen. The green laser pen can be placed arbitrarily on the two placement lines.</p><p> The screen is white, with an effective area greater than 0.6 x 0.6 m². A square with a side length of 0.5m is drawn in the center of the screen with a pencil to mark the screen&#39;s edges; the center of the drawn square is the origin, and the origin position is marked with a pencil, with a pencil trace width ≤ 1mm. The red and green spot position control systems must be independent and cannot communicate in any way; the spot diameter is less than 1 cm; there are no electronic components on the screen; the control system cannot use desktop computers or laptops.</p><h3 id="requirements" tabindex="-1"><a class="header-anchor" href="#requirements"><span><strong>Requirements</strong></span></a></h3><h4 id="basic-requirements" tabindex="-1"><a class="header-anchor" href="#basic-requirements"><span><strong>Basic Requirements</strong></span></a></h4><ol><li><p>Set a reset function for the moving target position. When this function is executed, the red spot can return from any position on the screen to the origin. The error between the center of the spot and the origin ≤ 2 cm.</p></li><li><p>Activate the moving target control system. The red spot can move clockwise around the four edges of the screen within 30 seconds, with the distance between the center of the spot and the edge ≤ 2 cm.</p></li><li><p>Use about 1.8 cm wide black electrician tape to stick a rectangle along the four sides of an A4 paper, forming an A4 target paper. Stick this A4 target paper at a designated position on the screen. Activate the moving target control system, and the red spot can move clockwise along the tape within 30 seconds.</p></li><li><p>Stick the above A4 target paper at any rotation angle on the screen at any position. Activate the moving target control system, with the same requirements as 3.</p></li></ol><h4 id="advanced-requirements" tabindex="-1"><a class="header-anchor" href="#advanced-requirements"><span><strong>Advanced Requirements</strong></span></a></h4><ol><li><p>Reset the moving target position, one-key start the automatic tracking system, control the green spot to track the red spot within 2 seconds, and issue continuous sound and light prompts upon successful tracking. The distance between the centers of the two spots should be ≤ 3 cm.</p></li><li><p>Repeat the actions of the basic requirements 3 ~ 4 for the moving target. The green laser pen emitter can be placed at any position on its placement line, simultaneously activate the moving target and automatic tracking system, and the green spot can automatically track the red spot. After 2 seconds of system startup, it should track successfully and issue continuous sound and light prompts.</p></li></ol><p> Both the moving target control system and the automatic tracking system need to set a pause key. When the pause key is pressed simultaneously, the red and green spots should immediately brake to measure the distance between the centers of the two spots.</p><h2 id="implementation-plan" tabindex="-1"><a class="header-anchor" href="#implementation-plan"><span><strong>Implementation Plan</strong></span></a></h2><h3 id="abstract" tabindex="-1"><a class="header-anchor" href="#abstract"><span><!----></span></a></h3><p> In response to the technical parameter requirements of the selected topic, this design uses the ESP32-S3 microcontroller as the control core of the entire system, selecting hardware devices such as Orange Pi, NVIDIA Jetson, brushless DC motors, two-dimensional pan-tilt, and RGB camera, and combining programming in C++ and python3.6, which can better achieve the design requirements. After testing, regardless of the position of the A4 target paper on the screen, the designed system can effectively recognize the target paper, and the red spot controlled by the pan-tilt can complete a clockwise movement on the target paper within 30 seconds. In addition, by adopting image processing algorithms such as color space conversion, binarization processing, and Gaussian filtering, the designed system can better achieve recognition and motion tracking of red and green spots, and during the tracking process, the center distance of different spots can be kept within 3 cm at all times.</p><h3 id="scheme-demonstration" tabindex="-1"><a class="header-anchor" href="#scheme-demonstration"><span><strong>Scheme Demonstration</strong></span></a></h3><p> This system mainly demonstrates the selection of motors, image processing modules, and main control chip selection, with other peripheral supporting hardware being conventional design.</p><h4 id="motor-selection" tabindex="-1"><a class="header-anchor" href="#motor-selection"><span><strong>Motor Selection</strong></span></a></h4><p>Option 1: Use servos as the main operating structure components of the pan-tilt</p><p> Servos are motors with position feedback that can accurately control the motor angle, usually consisting of a DC motor, position sensor, and control circuit. However, during servo control, <strong>the operating speed is relatively slow, and stability and accuracy are relatively poor</strong>. According to the technical indicators of the selected topic and the tentative tests of our team members, using servos cannot meet the high-precision real-time position control requirements of laser points during operation.</p><p>Option 2: Use stepper motors as the main operating structure components of the pan-tilt</p><p> Stepper motors are electrical pulse input motors that can control the rotation angle and speed by changing the number of pulses, with high operating precision. However, <strong>using only stepper motors cannot achieve stable closed-loop control of laser points</strong>, and it is necessary to combine other sensors for testing, which can easily lead to significant cumulative errors. In addition, stepper motors have some disadvantages in terms of motion rate, dynamic response, step loss problems, and electromagnetic interference.</p><p>Option 3: Use brushless DC motors as the main operating structure components of the pan-tilt</p><p> Brushless DC motors can control the rotor position of the motor through an electronic commutator. The permanent magnet on the rotor of the brushless motor and the coils on the stator are alternately excited through the electronic commutator to achieve the rotation of the motor. Compared with the previous two options, brushless DC motors have the characteristics of <strong>high efficiency, high torque, and high speed</strong>. Through control with PWM and PID algorithms, they can better meet the requirements of the selected topic for fast and accurate movement and tracking of laser points. Therefore, this design selects brushless DC motors as the main operating structure components of the two-dimensional pan-tilt.</p><h4 id="image-processing-module" tabindex="-1"><a class="header-anchor" href="#image-processing-module"><span><strong>Image Processing Module</strong></span></a></h4><p>Option 1: Use the built-in processing module of OpenMV</p><p> OpenMV is a low-power image processing module based on the Python programming language, equipped with an ARMCortex-M7 processor, with real-time image processing functions such as image denoising, color recognition, QR code and barcode recognition, etc. However, the preliminary test results of our team members on OpenMV show that the <strong>camera performance of this image processing module is average, and it is not sensitive enough to changes in the ambient scene light source</strong>. During the recognition of lasers, it is easily affected by the power of the laser, leading to a decrease in recognition accuracy.</p><p>Option 2: Use the built-in processing module of K210</p><p> K210 is a system-on-chip based on the RISC-V architecture, with dual-core 64-bit RISC-V processors, image processing units, and artificial intelligence support functions, which is a mainstream image processing module on the market. However, the built-in camera performance of K210 is also not outstanding, and its <strong>flash is small, sometimes causing stuttering or even crashing when flashing large firmware</strong>, and the connection communication between the supporting development environment and the lower machine is not stable.</p><p>Option 3: Use Orange Pi/NVIDIA Jetson as the processor, and connect a high-definition camera module</p><p> Compared with the common camera processing modules on the market such as OpenMV and K210, the external high-definition RGB camera module has higher image resolution and can be better used for image recognition tasks. In order for the designed system to better adapt to laser modules of different powers and different light source environmental scenarios, <strong>this design selects an external high-definition camera module as the image acquisition unit, and uses Orange Pi/NVIDIA Jetson embedded systems as the image processing unit.</strong></p><h4 id="main-control-chip-selection" tabindex="-1"><a class="header-anchor" href="#main-control-chip-selection"><span><strong>Main Control Chip Selection</strong></span></a></h4><p>Option 1: Use 51 series microcontroller.</p><p> The 51 microcontroller chip architecture is simple, with limited on-chip peripheral resources and most functions requiring external expansion, <strong>with fewer I/O ports, low clock accuracy, slow operation speed, and small storage capacity</strong>. It is only suitable for various embedded systems and small projects and cannot better meet the requirements of this design for real-time performance and motion accuracy.</p><p>Option 2: Choose STM32 microcontroller</p><p> STM32 is a series of 32-bit ARM Cortex-M core microcontrollers launched by STMicroelectronics, with high performance, low power consumption, and strong reliability. However, the programming complexity of STM32 is relatively high, <strong>with poor code reusability</strong>, and within the relatively short design time limit, the complex program structure can easily affect the stability of software and hardware debugging.</p><p>Option 3: Choose Esp32 microcontroller</p><p> Esp32 is a series of chip microcontrollers independently developed by Espressif. It has the characteristics of low cost, low power consumption, rich peripheral input and output interfaces, and compatibility with the Arduino framework, with lower programming complexity and <strong>higher code reusability with C++ programming</strong>, which is more suitable for developing a system with high stability and real-time performance in a <strong>short time</strong>.</p><h3 id="system-design-and-implementation" tabindex="-1"><a class="header-anchor" href="#system-design-and-implementation"><span><strong>System Design and Implementation</strong></span></a></h3><h4 id="hardware-system-design" tabindex="-1"><a class="header-anchor" href="#hardware-system-design"><span><strong>Hardware System Design</strong></span></a></h4><p>Comprehensively analyze the functions that the designed system needs to achieve, and the overall block diagram of the hardware system built is shown in Figure 1:</p><div align="center"><img src="/en/%E8%BF%90%E5%8A%A8%E7%9B%AE%E6%A0%87%E6%8E%A7%E5%88%B6%E4%B8%8E%E8%87%AA%E5%8A%A8%E8%BF%BD%E8%B8%AA%E7%B3%BB%E7%BB%9F/%E5%9B%BE%E4%B8%80%E7%B3%BB%E7%BB%9F%E6%80%BB%E4%BD%93%E7%A1%AC%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%A1%86%E5%9B%BE.png" align="middle"><br> Figure 1 Overall Hardware Design Block Diagram of the System </div><p> The power supply uses a 11.3V power module, and through the step-down and voltage stabilization circuit, the generated voltage is supplied to the microcontroller processor, brushless DC motor drive module, brushless DC motor, and image processor respectively. The button module is directly connected to the microcontroller I/O, used to realize the reset of the laser, the rapid switching of different design functions, etc.; Orange Pi/Jetson is used to receive the image information of the high-definition camera, and through the image processing algorithm, to quickly recognize and judge the color and position of the laser, and transmit the recognition result to the microcontroller processor; the microcontroller processor then generates PWM signals with different duty cycles and outputs them to the brushless DC motor drive module, thereby driving the two-dimensional pan-tilt to quickly move, and finally realizing all the functions of the system.</p><h4 id="software-system-design" tabindex="-1"><a class="header-anchor" href="#software-system-design"><span><strong>Software System Design</strong></span></a></h4><h5 id="a4-target-paper-position-recognition" tabindex="-1"><a class="header-anchor" href="#a4-target-paper-position-recognition"><span><strong>A4 Target Paper Position Recognition</strong></span></a></h5><p> Since the outer frame of the A4 target paper is stuck with black tape, which has a large color contrast with the white background plate, it is relatively easy to extract the pixel coordinates of the four corners of the inner and outer rectangular frames of the black tape of the A4 target paper using the image segmentation function built into OpenCV. Since the obtained pixel coordinates cannot be better matched one by one, the black tape center path is fitted through an independently designed rectangular fitting algorithm. The specific method is to record the pixel coordinates of the inner and outer rectangles in the following form:</p><!----><!----><p> Determine the corresponding corner coordinates of the inner and outer sides at the same position through the distance calculation between two points, the calculation formula is as follows:</p><!----><p> According to the arrangement result of the four corner points of the inner and outer rectangles, calculate the rectangular corner coordinates of the black tape center path, and draw a complete rectangular path through the straight line connection between pixels, and traverse all pixel coordinates on the rectangular frame in reverse, providing a complete running path for the lower machine, the algorithm flow block diagram is shown in Figure 2.</p><div align="center"><img src="/en/%E8%BF%90%E5%8A%A8%E7%9B%AE%E6%A0%87%E6%8E%A7%E5%88%B6%E4%B8%8E%E8%87%AA%E5%8A%A8%E8%BF%BD%E8%B8%AA%E7%B3%BB%E7%BB%9F/%E5%9B%BE%E4%BA%8CA4%E9%9D%B6%E7%BA%B8%E4%BD%8D%E7%BD%AE%E8%AF%86%E5%88%AB%E7%AE%97%E6%B3%95.png" align="middle"><br> Figure 2 A4 Target Paper Position Recognition Algorithm </div><h5 id="laser-tracking" tabindex="-1"><a class="header-anchor" href="#laser-tracking"><span><strong>Laser Tracking</strong></span></a></h5><p> The laser tracking function of this design is mainly realized through the image recognition algorithm. After the high-definition camera captures the real-time video, the real-time video is sampled to obtain image data at adjacent times. In order to better recognize different laser colors, the extracted image frames are first converted from the RGB color space to the HSV color space, and Gaussian blur and median filtering are applied to reduce image noise and smooth image edges. Then, morphological operations (closing, opening, and dilation) are used to further remove noise and increase the contrast of the image for lasers and the background. Finally, the image is converted into a binary image through thresholding, and the contours that meet a certain area range are found, and the centroid of the laser is calculated, the processing flow is shown in Figure 3.</p><div align="center"><img src="/en/%E8%BF%90%E5%8A%A8%E7%9B%AE%E6%A0%87%E6%8E%A7%E5%88%B6%E4%B8%8E%E8%87%AA%E5%8A%A8%E8%BF%BD%E8%B8%AA%E7%B3%BB%E7%BB%9F/%E5%9B%BE%E4%B8%89%E6%BF%80%E5%85%89%E8%BF%BD%E8%B8%AA%E7%AE%97%E6%B3%95.png" align="middle"><br> Figure 3 Laser Tracking Algorithm </div><h3 id="test-plan-and-test-result-analysis" tabindex="-1"><a class="header-anchor" href="#test-plan-and-test-result-analysis"><span><strong>Test Plan and Test Result Analysis</strong></span></a></h3><h4 id="test-method" tabindex="-1"><a class="header-anchor" href="#test-method"><span><strong>Test Method</strong></span></a></h4><p> According to the test indicator requirements of the selected topic, test the distance between the center of the spot and the origin, the distance between the center of the spot and the edge, the distance the spot deviates from the tape, and the distance between the centers of the two spots in the basic requirements part and the advanced part, all tests are repeated 9 times and the error results are manually measured.</p><h4 id="test-results" tabindex="-1"><a class="header-anchor" href="#test-results"><span><strong>Test Results</strong></span></a></h4><p> The basic requirements test and advanced part test are as follows:</p><div align="center"><img src="/en/%E8%BF%90%E5%8A%A8%E7%9B%AE%E6%A0%87%E6%8E%A7%E5%88%B6%E4%B8%8E%E8%87%AA%E5%8A%A8%E8%BF%BD%E8%B8%AA%E7%B3%BB%E7%BB%9F/%E5%9F%BA%E6%9C%AC%E8%A6%81%E6%B1%82%E6%B5%8B%E8%AF%95%E4%B8%8E%E5%8F%91%E6%8C%A5%E9%83%A8%E5%88%86%E6%B5%8B%E8%AF%95.png" align="middle"><br> Basic Requirements Test and Advanced Part Test </div><p> According to the results of multiple actual tests, the designed system has good test effects both in the basic test part and the advanced part, and the generated test errors are within the acceptable range, the system has good real-time test accuracy.</p><h4 id="existing-problems" tabindex="-1"><a class="header-anchor" href="#existing-problems"><span><strong>Existing Problems</strong></span></a></h4><p> It should be noted that due to the use of the pause button test, there is a certain time difference between the real-time performance of the test results and the actual running effect, so the results obtained may be slightly less than the actual test. Due to the limited development time, the control of the motors in this system only adopts angle closed-loop control and does not add speed closed-loop control. Therefore, the control accuracy of the angle is significantly higher than that of the speed. In addition, the Orange Pi and Jetson used in this design have high costs, and subsequent improvements will consider low-cost solutions.</p><h4 id="conclusion" tabindex="-1"><a class="header-anchor" href="#conclusion"><span><strong>Conclusion</strong></span></a></h4><p> This design of the moving target control and automatic tracking system uses the ESP32-S3 microcontroller as the control core of the entire system, through the external high-definition camera as the image acquisition equipment, using Orange Pi/Jetson for real-time image processing, and independently designing the target paper center running path fitting algorithm, which can more accurately achieve the main functions of the selected topic. Due to the limited development time, the control of the motors in this system only adopts angle closed-loop control and does not add speed closed-loop control, subsequent optimizations will focus on considering low-cost dual closed-loop control solutions, thereby improving the system&#39;s construction cost and running accuracy.</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: uint16kun">uint16kun</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: no@no.com">no</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><!----><a class="route-link auto-link next" href="/my-projects/High-throughput%20phenotype%20monitoring%20system%20for%20potted%20plants.html" aria-label="High-Throughput Phenotyping Monitoring System for Potted Plants"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>High-Throughput Phenotyping Monitoring System for Potted Plants</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-O5f_D5B5.js" defer></script>
  </body>
</html>
