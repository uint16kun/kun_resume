<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.14" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <title>小车跟随行驶系统 | 徐瀚鲲</title><meta name="description" content="徐瀚鲲的简历">
    <link rel="preload" href="/assets/style-10ckNbAn.css" as="style"><link rel="stylesheet" href="/assets/style-10ckNbAn.css">
    <link rel="modulepreload" href="/assets/app-DeeBI4jg.js"><link rel="modulepreload" href="/assets/Car following driving system.html-DWuANBUl.js"><link rel="modulepreload" href="/assets/图6程序总流程图-cV35Ecru.js">
    <link rel="prefetch" href="/assets/index.html-NdhcEH47.js" as="script"><link rel="prefetch" href="/assets/index.html-DF5jIxgO.js" as="script"><link rel="prefetch" href="/assets/index.html-DbYauLb5.js" as="script"><link rel="prefetch" href="/assets/index.html-D5XgfMkC.js" as="script"><link rel="prefetch" href="/assets/Brushless motor drive circuit and FOC control algorithm design.html-Bws31Lmj.js" as="script"><link rel="prefetch" href="/assets/Car following driving system.html-Ig8mDMqv.js" as="script"><link rel="prefetch" href="/assets/High-throughput phenotype monitoring system for potted plants.html-DgxbihxW.js" as="script"><link rel="prefetch" href="/assets/Moving target control and automatic tracking system.html-CnpJwsQ5.js" as="script"><link rel="prefetch" href="/assets/Non-contact object size and shape measurement.html-BJ6qUOB0.js" as="script"><link rel="prefetch" href="/assets/index.html-CI46PJ6g.js" as="script"><link rel="prefetch" href="/assets/Rolling ball control system.html-BWu0R3XT.js" as="script"><link rel="prefetch" href="/assets/Smart medicine delivery car.html-pdhVrQ2e.js" as="script"><link rel="prefetch" href="/assets/index.html-BfDFNKIX.js" as="script"><link rel="prefetch" href="/assets/index.html-BnbRg1h8.js" as="script"><link rel="prefetch" href="/assets/Brushless motor drive circuit and FOC control algorithm design.html-DHCUwBN7.js" as="script"><link rel="prefetch" href="/assets/Car following driving system.html-C_mME8Ne.js" as="script"><link rel="prefetch" href="/assets/High-throughput phenotype monitoring system for potted plants.html-CQMxWgxP.js" as="script"><link rel="prefetch" href="/assets/Moving target control and automatic tracking system.html-mEz6F9rZ.js" as="script"><link rel="prefetch" href="/assets/Non-contact object size and shape measurement.html-4-64WefN.js" as="script"><link rel="prefetch" href="/assets/index.html-DoRB70zf.js" as="script"><link rel="prefetch" href="/assets/Rolling ball control system.html-DMWOwmSo.js" as="script"><link rel="prefetch" href="/assets/Smart medicine delivery car.html-CDEEGeRq.js" as="script"><link rel="prefetch" href="/assets/index.html-BbXa3WAl.js" as="script"><link rel="prefetch" href="/assets/Brushless motor drive circuit and FOC control algorithm design.html-DX2zp-sm.js" as="script"><link rel="prefetch" href="/assets/High-throughput phenotype monitoring system for potted plants.html-C_x7FHCA.js" as="script"><link rel="prefetch" href="/assets/Moving target control and automatic tracking system.html-Dq3_obUN.js" as="script"><link rel="prefetch" href="/assets/Non-contact object size and shape measurement.html-D_lX0Ek3.js" as="script"><link rel="prefetch" href="/assets/index.html-DuOr7h4D.js" as="script"><link rel="prefetch" href="/assets/Rolling ball control system.html-bFEbMt3r.js" as="script"><link rel="prefetch" href="/assets/Smart medicine delivery car.html-BRddePUB.js" as="script"><link rel="prefetch" href="/assets/404.html-CweUsji2.js" as="script"><link rel="prefetch" href="/assets/SearchResult-Bg1fMppA.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/zh/"><img class="vp-site-logo" src="/logo.jpg" alt="徐瀚鲲"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">徐瀚鲲</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/zh/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/zh/my-projects/" aria-label="我的项目"><!---->我的项目<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/zh/curriculum-vitae/" aria-label="简历"><!---->简历<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">语言</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">语言</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/my-projects/Car%20following%20driving%20system.html" aria-label="English"><!---->English<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/zh/my-projects/Car%20following%20driving%20system.html" aria-label="简体中文"><!---->简体中文<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/jp/my-projects/Car%20following%20driving%20system.html" aria-label="日本語"><!---->日本語<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/uint16kun/" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><button class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><button type="button" class="search-pro-button" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon" name="search"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="search-pro-placeholder">搜索</div><div class="search-pro-key-hints"><kbd class="search-pro-key">Ctrl</kbd><kbd class="search-pro-key">K</kbd></div></button><!--]--></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/zh/" aria-label="首页"><!---->首页<!----></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/zh/my-projects/" aria-label="我的项目"><!---->我的项目<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/zh/curriculum-vitae/" aria-label="简历"><!---->简历<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">语言</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">语言</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/my-projects/Car%20following%20driving%20system.html" aria-label="English"><!---->English<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/zh/my-projects/Car%20following%20driving%20system.html" aria-label="简体中文"><!---->简体中文<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/jp/my-projects/Car%20following%20driving%20system.html" aria-label="日本語"><!---->日本語<!----></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/uint16kun/" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading active" href="/zh/my-projects/" aria-label="我的项目"><!---->我的项目<!----></a><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/zh/my-projects/Moving%20target%20control%20and%20automatic%20tracking%20system.html" aria-label="运动目标控制与自动追踪系统"><!---->运动目标控制与自动追踪系统<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/zh/my-projects/High-throughput%20phenotype%20monitoring%20system%20for%20potted%20plants.html" aria-label="盆栽植物高通量表型监测系统"><!---->盆栽植物高通量表型监测系统<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/zh/my-projects/Car%20following%20driving%20system.html" aria-label="小车跟随行驶系统"><!---->小车跟随行驶系统<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/zh/my-projects/Non-contact%20object%20size%20and%20shape%20measurement.html" aria-label="非接触物体尺寸形态测量"><!---->非接触物体尺寸形态测量<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/zh/my-projects/Brushless%20motor%20drive%20circuit%20and%20FOC%20control%20algorithm%20design.html" aria-label="无刷电机驱动电路及FOC控制算法设计"><!---->无刷电机驱动电路及FOC控制算法设计<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="项目要求" tabindex="-1"><a class="header-anchor" href="#项目要求"><span><strong>项目要求</strong></span></a></h2><h3 id="任务" tabindex="-1"><a class="header-anchor" href="#任务"><span><strong>任务</strong></span></a></h3><p> 设计一套小车跟随行驶系统，采用 TI 的 MCU，由一辆领头小车和一辆跟随 小车组成，要求小车具有循迹功能，且速度在 0.3 ~ 1m/s 可调，能在指定路径上 完成行驶操作，行驶场地的路径如图 1 所示。其中，路径上的 A 点为领头小车 每次行驶的起始点和终点。当小车完成一次行驶到达终点，领头小车和跟随小车 要发出声音提示。领头小车和跟随小车既可以沿着 ABFDE 圆角矩形（ 简称为 内圈 ）路径行驶，也可以沿着 ABCDE 的圆角矩形（ 简称为外圈 ）路径行驶。 当行驶在内圈 BFD 段时，小车要发出灯光指示。此外，在测试过程中，可以在 路径上 E 点所在边的直线区域，由测试专家指定位置放上“等停指示”标识（见图 1 左侧），指示领头小车在此处须停车，等待 5 秒后再继续行驶。</p><div align="center"><img src="/zh/%E5%B0%8F%E8%BD%A6%E8%B7%9F%E9%9A%8F%E8%A1%8C%E9%A9%B6%E7%B3%BB%E7%BB%9F/%E5%9B%BE1%E5%B0%8F%E8%BD%A6%E8%B7%9F%E9%9A%8F%E8%A1%8C%E9%A9%B6%E5%9C%BA%E5%9C%B0%E7%A4%BA%E6%84%8F%E5%9B%BE.png" align="middle"><br> 图1 小车跟随行驶场地示意图 </div><h3 id="要求" tabindex="-1"><a class="header-anchor" href="#要求"><span><strong>要求</strong></span></a></h3><ol><li>将领头小车放在路径的起始位置 A 点，跟随小车放在其后 20cm 处，设 定领头小车速度为 0.3m/s，沿着外圈路径行驶一圈停止，要求：</li></ol><ul><li>领头小车的平均速度误差不大于 10%；</li><li>跟随小车能跟随领头小车行驶，全程不能发生小车碰撞；</li><li>完成一圈行驶后领头小车到达 A 点处停车，跟随小车应及时停止，停止 时间差不超过 1s，且与领头小车的间距为 20cm，误差不大于 6cm。</li></ul><ol start="2"><li>将领头小车放在路径轨迹的起始位置 A 点，跟随小车放在路径上 E 点所在 边的直线区域，由测试专家指定的位置，设定领头小车速度为 0.5m/s，沿着外圈 路径行驶两圈停止，要求：</li></ol><ul><li>领头小车的平均速度误差不大于 10%；</li><li>跟随小车能快速追上领头小车，然后按 20cm 间距跟随领头小车行驶， 全程不能发生小车碰撞：</li><li>完成两圈行驶后领头小车达到 A 点停止，跟随小车应及时停止，两车停 止的时间差不超过 1s，且与领头小车的间距为 20cm，误差不大于 6cm。</li></ul><ol start="3"><li>将领头小车放在路径的起始位置 A 点，跟随小车放在其后 20cm 处，领 头小车和跟随小车连续完成三圈路径的行驶。第一圈领头小车和跟随小车都沿着 外圈路径行驶。第二圈领头小车沿着外圈路径行驶，跟随小车沿着内圈路径行驶， 实现超车领跑。第三圈跟随小车沿着外圈路径行驶，领头小车沿着内圈路径行驶， 实现反超和再次领跑。要求：</li></ol><ul><li>全程两个小车行驶平稳，顺利完成两次超车，且不能发生小车碰撞；</li><li>完成三圈行驶后领头小车到达 A 点停止，跟随小车应及时停止，两车停 止的时间差不超过 1s，且与领头小车的间距为 20cm，误差不大于 6cm；</li><li>小车行驶速度可自主设定，但不得低于 0.3m/s，且完成所规定的三圈轨 迹行驶所需时间越短越好。</li></ul><ol start="4"><li>由测试专家在路径的 E 点所在边的直线区域指定位置，放上“等停指示” 标识。然后，将领头小车放在路径的起始位置 A 点，跟随小车放在其后 20cm 处， 设定领头小车速度为 1m/s，沿着外圈路径行驶一圈，行驶中两小车不得发生碰 闯。要求：</li></ol><ul><li>领头小车的平均速度误差不大于 10%；</li><li>领头小车达到“等停指示”点停车，停车位置准确，误差不大于 5cm；</li><li>在“等停指示”处停车时间为 5s，误差不超过 1s。</li></ul><h3 id="说明" tabindex="-1"><a class="header-anchor" href="#说明"><span><strong>说明</strong></span></a></h3><ol><li>作品中的小车中尺寸不大于 15cm（宽）X 25cm（长）。小车尺寸包括小 车本体、以及小车所安装的传感器等总体的尺寸大小。</li><li>行驶场地上铺设白纸，行驶路径用 1cm 宽的黑色引导线来标志，可以印 刷或打印在白纸上，也可以用黑色胶带纸直接粘贴在白纸上。轨迹上的起始点 A， 用垂直贴在路径引导线的黑色标志线来标记，标志线为 2cm 宽、5cm 长。“等停 指示”用间隔 5cm 的两条 2cm 宽、10cm 长的黑色平行标志线来标记，可以事先 在一张小的纸片上打印好，测试时对接粘贴在行驶路径的引导线上即可。除题目 要求的标记之外，行驶场地上不得有其他任何指示标记。</li><li>跟随小车的行驶完全由领头小车指挥控制，领头小车上有启动按键和设 置按键，而跟随小车只有一个上电开关，不得有其他启动和操作按键。每一次行 驶发车时，领头小车和跟随小车按照题目要求摆放在行驶路径的指定位置，跟随 小车上电，处于等待接收领头小车指令的状态。领头小车一键启动行驶，直到整 个行驶过程结束。</li><li>在两个小车跟随行驶过程中，除了两个小车间的相互通信外，不得有车 外遥控和其他通信指令辅助。</li><li>在本题目要求 4 中，领头小车遇到“等停指示”需立即停车，停车后车身 应在“等停指示”第二条横线以内，车头超出第二条横线的距离为停车位置误差。</li></ol><h2 id="实现方案" tabindex="-1"><a class="header-anchor" href="#实现方案"><span><strong>实现方案</strong></span></a></h2><h3 id="摘要" tabindex="-1"><a class="header-anchor" href="#摘要"><span><!----></span></a></h3><p> 本系统两辆三轮二驱小车主控制系统采用TI MSP432。通过UWB 定位模块、 HC-12 蓝牙模块、tb6612 电机驱动模块、灰度传感器和编码器并通过多传感器 融合算法解算出控制器模型所需要的参数给出PWM 的可控制流，最终实现小车 的运动控制，与此同时为了方便调试控制器参数，我们使用OLED 显示屏能够对 有关参数的调节进行有效监控。最终两个小车能够按一定速度巡线跟随且依托 于外部传感器完成相应的任务，经过反复调试和改进，循迹小车系统可靠，行 驶稳定，达到了指标要求。</p><h3 id="方案论证" tabindex="-1"><a class="header-anchor" href="#方案论证"><span><strong>方案论证</strong></span></a></h3><h4 id="主控芯片选择" tabindex="-1"><a class="header-anchor" href="#主控芯片选择"><span><strong>主控芯片选择</strong></span></a></h4><ol><li><p>小车系统架构的选取思路第一是MCU 的性能，其中MCU 最重要的就是他 的系统主频，这直接影响到MCU 的运行速度，整个小车涉及到很多个传感器的 数据以及复杂的算法需要进行处理。如果MCU 的性能不能支持这样的运算，那 么整个系统将不能实现他的各个功能，就会导致小车系统的崩溃。</p></li><li><p>MCU 的IO 口也很重要，各个传感器的数据通过IO 口传输到对应的位置， 比如USART,I2C,SPI,GPIO 的个数。</p></li><li><p>基于以上的需求我们经过几种不同的预期方案最终讨论如下：</p></li></ol><p><strong>方案一</strong>：采用msp430，该款MCU 具有高性能、低功耗的6xx 系列旗舰 型，达到25MIPS@3.3V，配备功耗优化的创新电源管理模块和USB 控制器，配 备LCD 控制器，有256KB FLASH、18KB RAM，74Pin 引脚，功耗与5xx 系列相同， 还额外集成了电压管理模块，但是该MCU 的主频还是太低。</p><p><strong>方案二</strong>：采用msp432MCU, 这款控制器有高速48MHZ 时钟，频率稳定可 控制性高，结合我们预期使用的传感器融合方案进行专门化设计。并且能 够提供更多的IO 口和板载外设，给我们的多传感器融合算法提供了有效的 实现平台，但同时也给我们的设计和实现带来了一定的困难。</p><p> 综合上述讨论我们选择了符合我们需求的方案二。</p><h4 id="降压模块选择" tabindex="-1"><a class="header-anchor" href="#降压模块选择"><span><strong>降压模块选择</strong></span></a></h4><p><strong>方案一</strong>: 使用线性元器件LM7805 三端稳压器构成稳压电路，给单片机 提供电压。它的输出纹波小，但是效率低，容易发热。</p><p><strong>方案二</strong>: 使用元器件LM2596 构成稳压电路，它的效率高不容易发热， 但是输出的纹波较大。</p><p> 综合对系统性能的考虑，小车依靠电池独立运行，需要高效稳压，而受输 出纹波影响较小，因此选择方案二。</p><h4 id="小车电机选择" tabindex="-1"><a class="header-anchor" href="#小车电机选择"><span><strong>小车电机选择</strong></span></a></h4><p><strong>方案一</strong>: 选用310 电机，动力强，但是重量大。</p><p><strong>方案二</strong>: 选用ng20 减速电机，动力稍弱，但是重量轻。</p><p> 经过反复研究，考虑到保持速度的同时维持姿态，最终选择了拥有更快 转速和力矩大的310 电机。</p><h4 id="驱动模块选择" tabindex="-1"><a class="header-anchor" href="#驱动模块选择"><span><strong>驱动模块选择</strong></span></a></h4><p><strong>方案一</strong>: 使用MOS 管和全桥/半桥驱动芯片搭建电机驱动，可允许通过 的电机电流大，可是结构复杂，体积较大。</p><p><strong>方案二</strong>: 使用基于TB6612 芯片的驱动模块，模块使用简单，方便接线， 体积相对较小，但是可过电流小。</p><p> 经过综合考虑，小车体积不宜过大，且经过测试，TB6612 模块的驱动 电流可以满足系统需求，因此选择方案二。</p><h3 id="理论分析与计算" tabindex="-1"><a class="header-anchor" href="#理论分析与计算"><span><strong>理论分析与计算</strong></span></a></h3><h4 id="小车运动控制设计" tabindex="-1"><a class="header-anchor" href="#小车运动控制设计"><span><strong>小车运动控制设计</strong></span></a></h4><ol><li>按偏差的比例、积分、微分进行控制的控制器称为PID 控制器，PID 控 制解决了自动控制理论所要解决的最为基本的问题，即系统的准确性、稳定性 和实时性。根据路径识别的情况，对小车采取相应的控制，达到合理设置速度 的目的。系统根据接收测速模块的速度值，通过PID 算法进行调节，进而控制 直流电机进行转速的改变，从而控制小车加减速与转向。</li></ol><p> 本组采用增量式PID 算法。增量式PID 控制是通过对控制量的增量（本次 控制量和上次控制量的差值）进行PID 控制的一种控制算法。其基本公式为：</p><!----><p> 其中，<!---->为第 n 次输出增量，<!---->为第n次偏差，<!---->分别对应 比例、积分、微分的系数。</p><ol start="2"><li>转弯控制方法</li></ol><p> 小车转弯采用差速控制方法，即通过设置不同的内侧轮和外侧轮速度改变 小车运行方向。小车前进过程中，以红外传感器检测到的轨迹变化为转向条件， 在测量得到的当前车速的基础上，分别调整内侧轮和外侧轮的的转速。内测轮 速度减去当前速度的一定百分比，外侧轮加上当前速度的一定百分比，达到差 速控制转向的目的，使小车循迹行驶。</p><ol start="3"><li>灰度传感器计算位置方法</li></ol><div align="center"><img src="/zh/%E5%B0%8F%E8%BD%A6%E8%B7%9F%E9%9A%8F%E8%A1%8C%E9%A9%B6%E7%B3%BB%E7%BB%9F/%E5%9B%BE1%E7%81%B0%E5%BA%A6%E4%BC%A0%E6%84%9F%E5%99%A8%E5%9F%BA%E6%9C%AC%E6%8E%A7%E5%88%B6%E5%8E%9F%E7%90%86.jpg" align="middle"><br> 图1 灰度传感器基本控制原理 </div><p> 本系统利用灰度传感器检测地面轨迹。当发射的红外线照射到的目标为黑色时， 被反射回来，收到的反馈信号很快就会变为高电平；我们从等间距排布的红外 传感器阵列读取数据，赋予各红外传感器阵元以相应的位置信息。由于传感器 接近地面，仅当下方检测到黑色粗线时才输出为“1”，我们对位置信息和传感 器反馈数据进行逐位相乘，即可得到小车与轨迹的相对位置信息</p><h4 id="小车通信模式分析" tabindex="-1"><a class="header-anchor" href="#小车通信模式分析"><span><strong>小车通信模式分析</strong></span></a></h4><p> 本系统采用HC-12 无线模块来进行两车的通信，工作频段为433.4MHz 至473.0MHz，具有100个通道通道步进为40KHz。</p><h4 id="小车距离控制" tabindex="-1"><a class="header-anchor" href="#小车距离控制"><span><strong>小车距离控制</strong></span></a></h4><p> 本系统的距离控制采用超宽带（UWB）定位技术利用事先布置在前车的锚 节点和桥节点，与后车的盲节点进行通讯，通过测量出不同基站与移动终端的 传输时延差来进行定位。通过UWB 返回的数据对两个小车速度进行整理，把数 据打包到PID 里通过PID 的返回的PWM 对两小车进行控速，进而控制小车的距 离。</p><h3 id="电路与程序设计" tabindex="-1"><a class="header-anchor" href="#电路与程序设计"><span><strong>电路与程序设计</strong></span></a></h3><h4 id="系统组成与框图" tabindex="-1"><a class="header-anchor" href="#系统组成与框图"><span><strong>系统组成与框图</strong></span></a></h4><p> 本系统总体框图如图2 所示。处理MCU 为MSP432,外围电路主要由灰度 传感器、驱动模块、稳压模块、速度检测模块，下图分析各个模块的设计的组 成。</p><div align="center"><img src="/zh/%E5%B0%8F%E8%BD%A6%E8%B7%9F%E9%9A%8F%E8%A1%8C%E9%A9%B6%E7%B3%BB%E7%BB%9F/%E5%9B%BE2%E7%B3%BB%E7%BB%9F%E6%80%BB%E4%BD%93%E6%A1%86%E5%9B%BE.png" align="middle"><br> 图2 系统总体框图 </div><h4 id="小车寻迹电路" tabindex="-1"><a class="header-anchor" href="#小车寻迹电路"><span><strong>小车寻迹电路</strong></span></a></h4><div align="center"><img src="/zh/%E5%B0%8F%E8%BD%A6%E8%B7%9F%E9%9A%8F%E8%A1%8C%E9%A9%B6%E7%B3%BB%E7%BB%9F/%E5%9B%BE3%E5%B0%8F%E8%BD%A6%E5%AF%BB%E8%BF%B9%E7%94%B5%E8%B7%AF.jpg" align="middle"><br> 图3 小车寻迹电路 </div><h4 id="小车间通信电路" tabindex="-1"><a class="header-anchor" href="#小车间通信电路"><span><strong>小车间通信电路</strong></span></a></h4><div align="center"><img src="/zh/%E5%B0%8F%E8%BD%A6%E8%B7%9F%E9%9A%8F%E8%A1%8C%E9%A9%B6%E7%B3%BB%E7%BB%9F/%E5%9B%BE4%E5%B0%8F%E8%BD%A6%E9%97%B4%E9%80%9A%E4%BF%A1%E7%94%B5%E8%B7%AF.jpg" align="middle"><br> 图4 小车间通信电路 </div><h4 id="小车防撞电路" tabindex="-1"><a class="header-anchor" href="#小车防撞电路"><span><strong>小车防撞电路</strong></span></a></h4><div align="center"><img src="/zh/%E5%B0%8F%E8%BD%A6%E8%B7%9F%E9%9A%8F%E8%A1%8C%E9%A9%B6%E7%B3%BB%E7%BB%9F/%E5%9B%BE5%E5%B0%8F%E8%BD%A6%E9%98%B2%E6%92%9E%E7%94%B5%E8%B7%AF.jpg" align="middle"><br> 图5 小车防撞电路 </div><h4 id="程序总流程图" tabindex="-1"><a class="header-anchor" href="#程序总流程图"><span><strong>程序总流程图</strong></span></a></h4><div align="center"><img src="/zh/%E5%B0%8F%E8%BD%A6%E8%B7%9F%E9%9A%8F%E8%A1%8C%E9%A9%B6%E7%B3%BB%E7%BB%9F/%E5%9B%BE6%E7%A8%8B%E5%BA%8F%E6%80%BB%E6%B5%81%E7%A8%8B%E5%9B%BE.jpg" align="middle"><br> 图6 程序总流程图 </div><h3 id="测试方案与测试结果" tabindex="-1"><a class="header-anchor" href="#测试方案与测试结果"><span><strong>测试方案与测试结果</strong></span></a></h3><h4 id="测试方法与仪器" tabindex="-1"><a class="header-anchor" href="#测试方法与仪器"><span><strong>测试方法与仪器</strong></span></a></h4><ol><li><p>仪器：示波器（DSOX2012A）、直流稳压电源（GPS-3303C）、万用表 （DT9205A）</p></li><li><p>测试方法：测试方法为先部分后整机：先将各模块电路分别进行测试， 确保能实现功能后，组装好小车，烧录程序；再将小车进行整体测试。将小车 放在跑道上，首先测试小车寻迹功能是否完整，其次在测试双车系统的测距功 能是否完好，分别去测试小车的速度和两车停止时的距离的误差。不断设定小 车的速度，重复上诉操作</p></li></ol><!----><table><thead><tr><th style="text-align:center;">测试次数</th><th style="text-align:center;">目标时间/s</th><th style="text-align:center;">实际时间/s</th><th style="text-align:center;">停车点两车间距误差/cm</th></tr></thead><tbody><tr><td style="text-align:center;">1</td><td style="text-align:center;">18</td><td style="text-align:center;">16</td><td style="text-align:center;">2.6</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">18</td><td style="text-align:center;">17</td><td style="text-align:center;">1.0</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">18</td><td style="text-align:center;">18.6</td><td style="text-align:center;">0.6</td></tr></tbody></table><!----><table><thead><tr><th style="text-align:center;">测试次数</th><th style="text-align:center;">目标距离/cm</th><th style="text-align:center;">目标时间/s</th><th style="text-align:center;">实际时间/s</th><th style="text-align:center;">停车点误差/cm</th></tr></thead><tbody><tr><td style="text-align:center;">1</td><td style="text-align:center;">20</td><td style="text-align:center;">24</td><td style="text-align:center;">20</td><td style="text-align:center;">1.3</td></tr><tr><td style="text-align:center;">2</td><td style="text-align:center;">20</td><td style="text-align:center;">24</td><td style="text-align:center;">16.1</td><td style="text-align:center;">1.6</td></tr><tr><td style="text-align:center;">3</td><td style="text-align:center;">20</td><td style="text-align:center;">24</td><td style="text-align:center;">19.3</td><td style="text-align:center;">2.6</td></tr><tr><td style="text-align:center;">4</td><td style="text-align:center;">20</td><td style="text-align:center;">24</td><td style="text-align:center;">22</td><td style="text-align:center;">1.0</td></tr><tr><td style="text-align:center;">5</td><td style="text-align:center;">20</td><td style="text-align:center;">24</td><td style="text-align:center;">23</td><td style="text-align:center;">0.6</td></tr><tr><td style="text-align:center;">6</td><td style="text-align:center;">20</td><td style="text-align:center;">24</td><td style="text-align:center;">24.3</td><td style="text-align:center;">0.6</td></tr></tbody></table><h4 id="结果分析" tabindex="-1"><a class="header-anchor" href="#结果分析"><span><strong>结果分析</strong></span></a></h4><p> 各部分硬件电路都测试正常，能实现各自的功能。代码编写正确无误， 能实现预期功能,小车可以实现寻迹与追踪功能，并且到达制定位置停止，蜂鸣 器响，速度也能到达制定要求。该系统基本实现了题目的要求，小车行驶平稳， 性能良好。但在一些弯道处有卡顿,所以在程序与硬件性能上进一步优化。</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: uint16kun">uint16kun</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/zh/my-projects/High-throughput%20phenotype%20monitoring%20system%20for%20potted%20plants.html" aria-label="盆栽植物高通量表型监测系统"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>盆栽植物高通量表型监测系统</span></div></a><a class="route-link auto-link next" href="/zh/my-projects/Non-contact%20object%20size%20and%20shape%20measurement.html" aria-label="非接触物体尺寸形态测量"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>非接触物体尺寸形态测量</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DeeBI4jg.js" defer></script>
  </body>
</html>
